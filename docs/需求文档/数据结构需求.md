# REQGROUP007. 数据结构需求

## 组ID
REQGROUP007

## 组名
数据结构需求

## 组描述
定义代码文档的标准化数据结构，采用YAML格式存储，确保数据的可读性、可扩展性和跨平台兼容性。数据结构应支持多种代码元素类型，并保持良好的层级关系。

## 数据结构设计

### 顶层结构
| 字段名 | 类型 | 描述 |
|---|---|---|
| modules | Map<String, Module> | 模块映射表，键为模块唯一名称，值为模块详情 |

### 模块结构（Module）
| 字段名 | 类型 | 必需 | 描述 |
|---|---|---|---|
| name | String | 是 | 模块显示名称（非唯一标识符） |
| hierarchical_name | String | 是 | 层次化唯一标识符（点号分隔路径），系统主键 |
| type | String | 是 | 模块类型，取值范围：class、functionGroup、file、function、variable |
| description | String | 否 | 模块描述信息 |
| parent | String | 否 | 父模块名称，用于建立层级关系 |
| file | String | 否 | 所在文件路径（通用字段，适用于所有类型） |

### 类型特定字段

#### class类型
| 字段名 | 类型 | 描述 |
|---|---|---|
| parentClass | String | 父类名称 |
| functions | List<String> | 类中包含的函数列表 |
| variables | List<String> | 类中的成员变量列表 |
| classes | List<String> | 类中的嵌套类列表 |
| access | String | 访问权限：public、private、protected |

#### function类型
| 字段名 | 类型 | 描述 |
|---|---|---|
| parameters | List<Parameter> | 函数参数列表 |
| returnType | String | 返回值类型 |
| access | String | 访问权限 |
| class | String | 所属类名称（如果有） |

#### variable类型
| 字段名 | 类型 | 描述 |
|---|---|---|
| dataType | String | 变量数据类型 |
| initialValue | String | 初始值 |
| access | String | 访问权限 |
| class | String | 所属类名称（如果有） |

#### file类型
| 字段名 | 类型 | 描述 |
|---|---|---|
| path | String | 文件完整路径 |
| classes | List<String> | 文件中定义的类列表 |
| functions | List<String> | 文件中定义的函数列表 |
| variables | List<String> | 文件中定义的全局变量列表 |

#### functionGroup类型
| 字段名 | 类型 | 描述 |
|---|---|---|
| functions | List<String> | 函数组中的函数列表 |

### 参数结构（Parameter）
| 字段名 | 类型 | 描述 |
|---|---|---|
| name | String | 参数名称 |
| type | String | 参数类型 |
| defaultValue | String | 默认值（可选） |
| description | String | 参数描述 |

## 示例数据结构

```yaml
modules:
  src.main.MyClass:
    name: "MyClass"
    hierarchical_name: "src.main.MyClass"
    type: "class"
    description: "示例类"
    file: "src/main.cpp"
    parentClass: "BaseClass"
    functions: ["src.main.MyClass.method1", "src.main.MyClass.method2"]
    variables: ["src.main.MyClass.member1", "src.main.MyClass.member2"]
    classes: ["src.main.MyClass.InnerClass"]
    access: "public"
  
  src.main.MyClass.method1:
    name: "method1"
    hierarchical_name: "src.main.MyClass.method1"
    type: "function"
    description: "示例方法"
    file: "src/main.cpp"
    parameters:
      - name: "param1"
        type: "int"
        description: "输入参数"
    returnType: "void"
    access: "public"
    class: "src.main.MyClass"
```